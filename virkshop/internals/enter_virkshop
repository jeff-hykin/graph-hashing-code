#!/usr/bin/env -S deno run --allow-all

// 
// 
// What does this file do?
// 
// 
    // Phase 1.1: Check the virkshop folder structure
    //    - remove anything that is broken, refresh some temp files
    //        - removing all system links inside virkshop would work
    //        - remove temporary/virkshop/autogenerated_final_shell_step
    //    - create anything thats missing
    //        - links all the mixin's start files into virkshop/events/phase_1
    //        - link the custom_system_tools.toml into virkshop/settings/system_tools.toml
    //        - link the project mixin to be outside the virkshop if nothing is blocking it's path
    //        - link the commands folder to be outside the virkshop if nothing is blocking it's path
    //        - link all the files in all the mixins into the virkshop folders, and give conflict errors if anything is in there way
    // Phase 1.2: Have extensions check their folder structure & ENV vars
    //    - execute every file inside the virkshop/events/phase_1 folder
    //    - each mixin can affect things (ENV vars, commands, sourcing stuff) through the virkshop Deno API
    //    examples of what mixins would do in phase 1:
    //    - git making sure theres a .git folder, a gitignore, and git hooks
    //    - python setting the PYTHON_PATH so that imports will work correctly
    // Phase 2.1: Run all "impure" setup files
    //    - execute all the files inside of events/phase_2
    //    examples:
    //    - linking to your system sudo command (otherwise sudo won't work in the virkshop)
    //    - linking your external vim config into this project
    //    - linking to ssh credential files
    //    - any ENV vars you want from the outside world
    // Phase 2.2: Setup  standardized environment
    //    - install all the system packages
    //    - setup a fake HOME folder
    //    - setup the shell (default zsh) profile file
    //    - generate the final shell step from the env files of all the mixin's and usages of the API
    //    - start the shell
    // ~Phase 3: Inside-the-workshop setup
    //    - this file doesn't (can't) directly run Phase 3
    //      this is because in the step above the shell is still executing
    //    - So: go to the shell's profile (default is .zshenv) because thats 
    //      where the real Phase 3 starts

